{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/refs.js","../src/js/render-functions.js","../src/js/config.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImagesByQuery(query, page, perPage) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '51391148-cca0cd30758df7ebb9b563956', \n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: perPage,\n        page: page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    return [];\n  }\n}","\n// Инициализация внутренних данных\nexport const form = document.querySelector('.form');\nexport const input = document.querySelector('input[name=\"search-text\"]');\nexport const loader = document.querySelector('#loader');\nexport const gallery = document.querySelector('.gallery');\nexport const loadMore = document.querySelector('.load-more');","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { gallery, loader, loadMore } from \"./refs\";\n\n\n// Инициализация SimpleLightbox\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionPosition: 'bottom',\n});\n\n// Рендер галереи\nexport function createGallery(images) {\n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n      </a> \n      <ul class=\"gallery-item-prop\">\n        <li class=\"gallery-item-likes\"><p><span>Likes</span><p>${likes}</p></li>\n        <li class=\"gallery-item-views\"><p><span>Views</span><p>${views}</p></li>\n        <li class=\"gallery-item-comments\"><p><span>Comments</span><p>${comments}</p></li>\n        <li class=\"gallery-item-downloads\"><p><span>Downloads</span><p>${downloads}</p></li>\n      </ul>\n    </li>\n  `).join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\n// Очистка галереи\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\n// Запуск лодыря\nexport function showLoader() {\n  loader.style.display = \"inline-block\";\n}\n\n// Останов лодыря\nexport function hideLoader() {\n  loader.style.display = \"none\";\n}\n\n// Показать кнопку Load more\nexport function showLoadMoreButton() {\nloadMore.style.display = \"block\"\n}\n\n// Скрыть кнопку Load more\nexport function hideLoadMoreButton() {\n    loadMore.style.display = \"none\"\n}","export const perPage = 15;","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\nimport { perPage } from './js/config.js';\nimport { form, input, loadMore } from './js/refs.js';\n\nhideLoadMoreButton();\n\nlet page = 0; \nlet query = '';\n\n// Обработка формы\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    query = input.value.trim();\n    page = 1;\n\n    if (!query) {\n        showIziError('Поле пошуку не може бути порожнім');\n        return;\n    }\n\n    hideLoadMoreButton();\n    clearGallery();\n    showLoader();\ntry {\n    const data = await getImagesByQuery(query, page, perPage);\n        \n            hideLoader();\n            input.value = \"\"; // Очищаем поле после успешного запроса\n            if (Math.ceil(data.totalHits / perPage) > page) { //Если страница одна - обязательно\n                showLoadMoreButton();\n            }\n            if (data.hits.length === 0) {\n                showIziError('Sorry, there are no images matching your search query. Please try again!');\n            } else {\n                createGallery(data.hits);\n            }\n        }catch(error){\n            hideLoader();\n            showIziError('Щось пішло не так... Ми вже працюємо над цією проблемою.');\n        };\n});\n\n//обработка кнопки ДАЛЕЕ\nloadMore.addEventListener(\"click\", async () => {\n    hideLoadMoreButton();\n    showLoader();\n    page++;\n    try {\n    const data = await getImagesByQuery(query, page, perPage);\n        \n            hideLoader();\n            createGallery(data.hits);\n            scroll();\n            if (Math.ceil(data.totalHits / perPage) > page) { // Если страница не последняя\n                showLoadMoreButton();\n            } else {\n                showIziEnd(\"We're sorry, but you've reached the end of search results.\")\n            }\n            \n        }catch(error) {\n            hideLoader();\n            showIziError('Щось пішло не так... Ми вже працюємо над цією проблемою.');\n        }\n   \n})\n\n// Функция для показа ошибок\nfunction showIziError(txt) {\n  iziToast.error({\n    title: 'Error',\n    message: `${txt}`,\n    progressBar: false,\n    transitionIn: 'fadeIn',\n    position: 'topRight',\n    animateInside: true,\n  });\n}\n\n// Функция для показа инфо\nfunction showIziEnd(txt) {\n  iziToast.info({\n    title: 'End',\n    message: `${txt}`,\n    progressBar: false,\n    transitionIn: 'fadeIn',\n    position: 'topRight',\n    animateInside: true,\n  });\n}\n\n// Скроллим - предназначено только для галереи\nfunction scroll() {\n  const galleryItem = document.querySelector('.gallery-item');\n  const gir = galleryItem.getBoundingClientRect();\n  setTimeout(() => {\n    window.scrollBy({\n      top: gir.height * 2,\n      behavior: 'smooth'\n    });\n  }, 700);\n}"],"names":["getImagesByQuery","query","page","perPage","axios","form","input","loader","gallery","loadMore","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","event","showIziError","data","scroll","showIziEnd","txt","iziToast","gir"],"mappings":"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"}